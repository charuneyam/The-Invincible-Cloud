# Default values for invincible-app.

replicaCount: 2

image:
  repository: kallurayarohith/the-invincible-cloud
  pullPolicy: IfNotPresent
  # Overridden by CI/CD pipeline usually
  tag: "latest"

service:
  type: LoadBalancer # DO will give a Public IP; K3s (AWS) might need MetalLB or NodePort
  port: 8000
  targetPort: 8000

resources: 
  limits:
    cpu: 200m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 128Mi

# Environment-specific configurations
# These are merged per cloud context by values-aws.yaml and values-gcp.yaml
env:
  # Database configuration (to be overridden per cloud)
  DB_HOST: localhost
  DB_PORT: "5432"
  DB_NAME: appdb
  DB_USER: postgres
  ENVIRONMENT: development

# Database credentials (from secrets)
secrets:
  dbPassword: ""  # Set via --set or values-aws.yaml/values-gcp.yaml

# ConfigMaps
configMaps:
  enabled: true
  # These get rendered as environment variables

# Pod security and health checks
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: false

# Probes for health checks
livenessProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 5
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 2